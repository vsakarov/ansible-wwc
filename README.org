#+Title: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ —Ä–∞–±–æ—Ç–Ω–∞ —Å—Ä–µ–¥–∞ —Å Ansible
#+Author: –í–∞—Å–∏–ª –°–∞–∫—ä—Ä–æ–≤
#+Email: vasil.sakarov@gmail.com
#+DATE: 20.02.2018

#+REVEAL_ROOT: http://cdn.jsdelivr.net/reveal.js/3.0.0/
#+REVEAL_THEME: serif
#+REVEAL_HLEVEL: 2
#+REVEAL_TRANS: fade
# #+REVEAL_PLUGINS: (highlight)
# #+REVEAL_EXTRA_JS: //cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/languages/yaml.min.js
#+REVEAL_SPEED: fast
#+REVEAL_MARGIN: 0.0
#+REVEAL_HEAD_PREAMBLE: <style type="text/css">pre.src { padding: 5px; }</style>
#+OPTIONS: reveal_title_slide:nil
#+OPTIONS: reveal_progress:nil
#+OPTIONS: reveal_slide_number:nil
#+OPTIONS: reveal_center:nil
#+OPTIONS: reveal_control:nil
#+OPTIONS: reveal_history:nil
#+OPTIONS: num:nil toc:nil

* –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ —Ä–∞–±–æ—Ç–Ω–∞ —Å—Ä–µ–¥–∞ —Å Ansible
:PROPERTIES:
:REVEAL_EXTRA_ATTR: class="center"
:END:
–í–∞—Å–∏–ª –°–∞–∫—ä—Ä–æ–≤

github: vsakarov

* –ö–∞–∫–≤–æ –µ Ansible?
–í –Ω–∞—É—á–Ω–∞—Ç–∞ —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞ ansible –µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –∫–æ–µ—Ç–æ –º–æ–∂–µ –¥–∞ –ø—Ä–µ–¥–∞–≤–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –º–∏–≥–Ω–æ–≤–µ–Ω–æ (–ø–æ-–±—ä—Ä–∑–æ –æ—Ç —Å–≤–µ—Ç–ª–∏–Ω–∞—Ç–∞) –Ω–∞ –æ–≥—Ä–æ–º–Ω–∏ —Ä–∞–∑—Å—Ç–æ—è–Ω–∏—è.

* 
:PROPERTIES:
:reveal_background: https://upload.wikimedia.org/wikipedia/en/e/e4/Ender%27s_game_cover_ISBN_0312932081.jpg
:reveal_background_size: contain
:END:

* –ö–∞–∫–≤–æ –µ Ansible?
–°–æ—Ñ—Ç—É–µ—Ä –∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

* –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞ –ø–æ–≤—Ç–∞—Ä—è—â–∏ —Å–µ –∑–∞–¥–∞—á–∏
- –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–µ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–µ –Ω–∞ —Å–æ—Ñ—Ç—É–µ—Ä
- —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –Ω–µ—â–∞—Ç–∞ –æ–∫–æ–ª–æ –Ω–∞—Å
- –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä–∞–Ω–µ
- –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–æ –∫–æ–¥

* –û—Å–æ–±–µ–Ω–æ—Å—Ç–∏
- –Ω—è–º–∞ –∞–≥–µ–Ω—Ç
- –±–∞–∑–∏—Ä–∞–Ω –Ω–∞ secure shell
- python
- yaml
- jinja
- –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–µ–Ω —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –º–æ–¥—É–ª–∏
|------------+--------------+--------------------|
| Cloud      | Inventory    | Remote Management  |
| Clustering | Messaging    | Source Control     |
| Commands   | Monitoring   | Storage            |
| Crypto     | Net Tools    | System             |
| Database   | Network      | Utilities          |
| Files      | Notification | Web Infrastructure |
| Identity   | Packaging    | Windows            |
|------------+--------------+--------------------|


* Ansible galaxy

#+REVEAL_HTML: –•—Ä–∞–Ω–∏–ª–∏—â–µ –∑–∞ —Ä–æ–ª–∏: <a href="https://galaxy.ansible.com/explore" target="_blank" style="font-size: 1.2em;">üåå</a>

* Ansible –≤ –¥–µ–π—Å—Ç–≤–∏–µ
#+BEGIN_SRC bash
$ ansible localhost -m ping
localhost | SUCCESS => {
    "changed": false,
    "ping": "pong"
}
#+END_SRC

* –ó–¥—Ä–∞–≤–µ–π —Å–≤—è—Ç
#+BEGIN_SRC bash
$ ansible localhost -m debug -e "msg=Hello World"
localhost | SUCCESS => {
    "changed": false,
    "msg": "Hello world!"
}
#+END_SRC

* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ —Å–∏—Å—Ç–µ–º–∞—Ç–∞
#+BEGIN_SRC bash
$ ansible localhost -m setup
localhost | SUCCESS => {
    "ansible_facts": {
        "ansible_all_ipv4_addresses": [
            "192.168.1.143",
            "172.18.0.1",
            "172.17.0.1"
        ],
....
+ –æ—â–µ 1000 —Ä–µ–¥–∞
#+END_SRC
* –°—Ü–µ–Ω–∞—Ä–∏–π/Playbook
#+BEGIN_SRC yaml
- hosts: localhost
  connection: local
  gather_facts: no
  tasks:
    - debug:
        msg: Hello WWC
#+END_SRC
#+BEGIN_SRC bash
$ ansible-playbook 01-hello.yml
PLAY [localhost] ******************************************************

TASK [debug] **********************************************************
ok: [localhost] => {
    "msg": "Hello WWC"
}

PLAY RECAP ************************************************************
localhost              : ok=1    changed=0    unreachable=0    failed=0
#+END_SRC
* Ansible –∏ –∫—Ä–∞–≤–∏—Ç–µ
#+BEGIN_SRC yaml
- hosts: localhost
  connection: local
  gather_facts: no
  tasks:
    - apt:
        name: cowsay
#+END_SRC
#+BEGIN_SRC bash
$ sudo ansible-playbook 02-cowsay.yml
PLAY [localhost] ******************************************************

TASK [apt] ************************************************************
changed: [localhost]

PLAY RECAP ************************************************************
localhost              : ok=1    changed=1    unreachable=0    failed=0
#+END_SRC
* Ansible –∏ –∫—Ä–∞–≤–∏—Ç–µ 2
#+BEGIN_SRC text
< PLAY [localhost] >
 ------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||

 ______________
< TASK [debug] >
 --------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||

ok: [localhost] => {
    "msg": "Hello WWC"
}
 ____________
< PLAY RECAP >
 ------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||

localhost               : ok=1    changed=0    unreachable=0    failed=0
#+END_SRC
* –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
:PROPERTIES:
:REVEAL_EXTRA_ATTR: class="center"
:END:
* –í—ä–ø—Ä–æ—Å–∏?
:PROPERTIES:
:REVEAL_EXTRA_ATTR: class="center"
:END:
